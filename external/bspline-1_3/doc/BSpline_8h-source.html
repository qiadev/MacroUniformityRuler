<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BSpline Library: /code/granger/bspline/bspline-1_3/BSpline/BSpline.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">BSpline</a></div>
<h1>BSpline.h</h1><a href="BSpline_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/* -*- mode: c++; c-basic-offset: 4; -*- */</span>
00002 <span class="comment">//</span>
00003 <span class="comment">// BSpline.h: interface for the BSplineBase class.</span>
00004 <span class="comment">//</span>
00006 <span class="comment"></span><span class="comment">/*</span>
00007 <span class="comment"> * Copyright (c) 1998,1999</span>
00008 <span class="comment"> * University Corporation for Atmospheric Research, UCAR</span>
00009 <span class="comment"> *</span>
00010 <span class="comment"> * Permission to use, copy, modify, distribute and sell this software and</span>
00011 <span class="comment"> * its documentation for any purpose is hereby granted without fee,</span>
00012 <span class="comment"> * provided that the above copyright notice appear in all copies and that</span>
00013 <span class="comment"> * both that copyright notice and this permission notice appear in</span>
00014 <span class="comment"> * supporting documentation.  UCAR makes no representations about the</span>
00015 <span class="comment"> * suitability of this software for any purpose.  It is provided "as is"</span>
00016 <span class="comment"> * without express or implied warranty.</span>
00017 <span class="comment"> * </span>
00018 <span class="comment"> * Note from the author:</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> * Where possible, you are encouraged to follow the GNU General Public</span>
00021 <span class="comment"> * License, or at least the spirit of the license, for the distribution and</span>
00022 <span class="comment"> * licensing of this software and any derived works.  See</span>
00023 <span class="comment"> * http://www.gnu.org/copyleft/gpl.html.</span>
00024 <span class="comment"> */</span>
00025 
00026 <span class="preprocessor">#ifndef _BSPLINEBASE_IFACE_ID</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define _BSPLINEBASE_IFACE_ID "$Id: BSpline.h,v 1.21 2005/05/27 21:16:23 granger Exp $"</span>
00028 <span class="preprocessor"></span>
00040 <span class="preprocessor">#if WIN32</span>
00041 <span class="preprocessor"></span><span class="preprocessor"># ifndef BSPLINE_DLL_</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#  define BSPLINE_DLL_ __declspec(dllimport)</span>
00043 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00045 <span class="preprocessor"></span><span class="preprocessor"># define BSPLINE_DLL_</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* WIN32 */</span>
00047 
00048 
00049 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classBSpline.html">BSpline</a>;
00050 
00051 <span class="comment">/*</span>
00052 <span class="comment"> * Opaque member structure to hide the matrix implementation.</span>
00053 <span class="comment"> */</span>
00054 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span>BSplineBaseP;
00055 
00187 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; 
<a name="l00188"></a><a class="code" href="classBSplineBase.html">00188</a> <span class="keyword">class </span>BSPLINE_DLL_ <a class="code" href="classBSplineBase.html">BSplineBase</a>  
00189 {
00190 <span class="keyword">public</span>:
00191     <span class="comment">// Datum type</span>
00192     <span class="keyword">typedef</span> T datum_type;
00193 
00195     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ImplVersion();
00196 
00198     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *IfaceVersion();
00199         
00205     <span class="keyword">static</span> <span class="keywordtype">bool</span> Debug (<span class="keywordtype">int</span> on = -1);
00206 
<a name="l00210"></a><a class="code" href="classBSplineBase.html#w4">00210</a>     <span class="keyword">enum</span> BoundaryConditionTypes
00211     {
00213         BC_ZERO_ENDPOINTS = 0,
00215         BC_ZERO_FIRST = 1,
00217         BC_ZERO_SECOND = 2
00218     };
00219 
00220 <span class="keyword">public</span>:
00221 
00228     <a class="code" href="classBSplineBase.html">BSplineBase</a> (<span class="keyword">const</span> T *x, <span class="keywordtype">int</span> nx, 
00229                  <span class="keywordtype">double</span> wl, <span class="keywordtype">int</span> bc_type = BC_ZERO_SECOND,
00230                  <span class="keywordtype">int</span> num_nodes = 0);
00231 
00233     <a class="code" href="classBSplineBase.html">BSplineBase</a> (<span class="keyword">const</span> <a class="code" href="classBSplineBase.html">BSplineBase</a> &amp;);
00234 
00260     <span class="keywordtype">bool</span> setDomain (<span class="keyword">const</span> T *x, <span class="keywordtype">int</span> nx, <span class="keywordtype">double</span> wl, 
00261                     <span class="keywordtype">int</span> bc_type = BC_ZERO_SECOND,
00262                     <span class="keywordtype">int</span> num_nodes = 0);
00263 
00271     <a class="code" href="classBSpline.html">BSpline&lt;T&gt;</a> *apply (<span class="keyword">const</span> T *y);
00272 
00278     <span class="keyword">const</span> T *nodes (<span class="keywordtype">int</span> *nnodes);
00279 
<a name="l00283"></a><a class="code" href="classBSplineBase.html#a5">00283</a>     <span class="keywordtype">int</span> nNodes () { <span class="keywordflow">return</span> M+1; }
00284 
<a name="l00288"></a><a class="code" href="classBSplineBase.html#a6">00288</a>     <span class="keywordtype">int</span> nX () { <span class="keywordflow">return</span> NX; }
00289 
<a name="l00291"></a><a class="code" href="classBSplineBase.html#a7">00291</a>     T Xmin () { <span class="keywordflow">return</span> xmin; }
00292 
<a name="l00294"></a><a class="code" href="classBSplineBase.html#a8">00294</a>     T Xmax () { <span class="keywordflow">return</span> xmin + (M * DX); }
00295 
00300     <span class="keywordtype">double</span> Alpha (<span class="keywordtype">double</span> wavelength);
00301 
<a name="l00305"></a><a class="code" href="classBSplineBase.html#a10">00305</a>     <span class="keywordtype">double</span> Alpha () { <span class="keywordflow">return</span> alpha; }
00306 
<a name="l00315"></a><a class="code" href="classBSplineBase.html#a11">00315</a>     <span class="keywordtype">bool</span> ok () { <span class="keywordflow">return</span> OK; }
00316 
00317     <span class="keyword">virtual</span> ~<a class="code" href="classBSplineBase.html">BSplineBase</a>();
00318 
00319 <span class="keyword">protected</span>:
00320 
00321     <span class="keyword">typedef</span> BSplineBaseP&lt;T&gt; Base;
00322 
00323     <span class="comment">// Provided</span>
00324     <span class="keywordtype">double</span> waveLength;  <span class="comment">// Cutoff wavelength (l sub c)</span>
00325     <span class="keywordtype">int</span> NX;
00326     <span class="keywordtype">int</span> K;      <span class="comment">// Degree of derivative constraint (currently fixed at 2)</span>
00327     <span class="keywordtype">int</span> BC;                     <span class="comment">// Boundary conditions type (0,1,2)</span>
00328 
00329     <span class="comment">// Derived</span>
00330     T xmax;
00331     T xmin;
00332     <span class="keywordtype">int</span> M;                      <span class="comment">// Number of intervals (M+1 nodes)</span>
00333     <span class="keywordtype">double</span> DX;                  <span class="comment">// Interval length in same units as X</span>
00334     <span class="keywordtype">double</span> alpha;
00335     <span class="keywordtype">bool</span> OK;
00336     Base *base;                 <span class="comment">// Hide more complicated state members</span>
00337                                 <span class="comment">// from the public interface.</span>
00338 
00339     <span class="keywordtype">bool</span> Setup (<span class="keywordtype">int</span> num_nodes = 0);
00340     <span class="keywordtype">void</span> calculateQ ();
00341     <span class="keywordtype">double</span> qDelta (<span class="keywordtype">int</span> m1, <span class="keywordtype">int</span> m2);
00342     <span class="keywordtype">double</span> Beta (<span class="keywordtype">int</span> m);
00343     <span class="keywordtype">void</span> addP ();
00344     <span class="keywordtype">bool</span> factor ();
00345     <span class="keywordtype">double</span> Basis (<span class="keywordtype">int</span> m, T x);
00346     <span class="keywordtype">double</span> DBasis (<span class="keywordtype">int</span> m, T x);
00347 
00348     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> BoundaryConditions[3][4];
00349     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> PI;
00350 
00351     <span class="keywordtype">double</span> Ratiod (<span class="keywordtype">int</span>&amp;, <span class="keywordtype">double</span> &amp;, <span class="keywordtype">double</span> &amp;);
00352 };
00353 
00354 
00355 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span>BSplineP;
00356 
00357 
00363 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00364"></a><a class="code" href="classBSpline.html">00364</a> <span class="keyword">class </span>BSPLINE_DLL_ BSpline : <span class="keyword">public</span> <a class="code" href="classBSplineBase.html">BSplineBase</a>&lt;T&gt;
00365 {
00366 <span class="keyword">public</span>:
00390     BSpline (<span class="keyword">const</span> T *x, <span class="keywordtype">int</span> nx,                <span class="comment">/* independent variable */</span>
00391              <span class="keyword">const</span> T *y,                        <span class="comment">/* dependent values @ ea X */</span>
00392              <span class="keywordtype">double</span> wl,                         <span class="comment">/* cutoff wavelength */</span>
00393              <span class="keywordtype">int</span> bc_type = <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::BC_ZERO_SECOND,
00394              <span class="keywordtype">int</span> num_nodes = 0);
00395 
00400     BSpline (<a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a> &amp;base, <span class="keyword">const</span> T *y);
00401 
00409     <span class="keywordtype">bool</span> solve (<span class="keyword">const</span> T *y);
00410 
00419     <span class="keyword">const</span> T *curve (<span class="keywordtype">int</span> *nx = 0);
00420 
00425     T evaluate (T x);
00426 
00431     T slope (T x);
00432 
00437     T coefficient (<span class="keywordtype">int</span> n);
00438 
00439     <span class="keyword">virtual</span> ~BSpline();
00440 
00441     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::Debug;
00442 
00443 <span class="keyword">protected</span>:
00444 
00445     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::OK;
00446     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::M;
00447     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::NX;
00448     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::DX;
00449     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::base;
00450     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::xmin;
00451     <span class="keyword">using</span> <a class="code" href="classBSplineBase.html">BSplineBase&lt;T&gt;</a>::xmax;
00452 
00453     <span class="comment">// Our hidden state structure</span>
00454     BSplineP&lt;T&gt; *s;
00455     T mean;                     <span class="comment">// Fit without mean and add it in later</span>
00456 
00457 };
00458 
00459 <span class="preprocessor">#endif // !defined _BSPLINEBASE_IFACE_ID</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 31 13:21:37 2005 for BSpline Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
